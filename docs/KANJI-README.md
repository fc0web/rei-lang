# æŸ±â‘¡ æ¼¢å­—/æ—¥æœ¬èªã®ğ•„è¡¨ç¾

## æ¦‚è¦

Reiã®ä¸­å¿ƒ-å‘¨è¾ºãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆğ•„ï¼‰ãŒè‡ªç„¶è¨€èªã®æ§‹é€ ã¨é©šãã»ã©ç›¸æ€§ãŒè‰¯ã„ã“ã¨ã‚’å®Ÿè¨¼ã™ã‚‹æ©Ÿèƒ½ç¾¤ã€‚
æ¼¢å­—ã®æ§‹é€ ã€æ—¥æœ¬èªã®æ–‡æ§‹é€ ã€ä¸­å›½èªã®å£°èª¿ã‚’ã€ã™ã¹ã¦ğ•„ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å†…ã§è¡¨ç¾ã™ã‚‹ã€‚

## ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

### æ¼¢å­—ã®æ§‹é€  = ğ•„ï¼ˆå…­æ›¸ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
```rei
ğ•„{"ä¼‘"; "äºº", "æœ¨"}     // ä¼šæ„: äººãŒæœ¨ã®ãã°ã§ä¼‘ã‚€
ğ•„{"æ˜"; "æ—¥", "æœˆ"}     // ä¼šæ„: æ—¥ã¨æœˆã§æ˜ã‚‹ã„
ğ•„{"æ£®"; "æœ¨", "æœ¨", "æœ¨"} // ä¼šæ„: æœ¨ãŒ3ã¤ã§æ£®
ğ•„{"æ™´"; "æ—¥", "é’"}     // å½¢å£°: æ„ç¬¦ã€Œæ—¥ã€+ éŸ³ç¬¦ã€Œé’ã€
```

### æ—¥æœ¬èªã®æ–‡æ§‹é€  = è¿°èªä¸­å¿ƒğ•„
```rei
ğ•„{"é£Ÿã¹ãŸ"; "çŒ«ãŒ", "é­šã‚’"}   // è¿°èªãŒä¸­å¿ƒã€å¼•æ•°ãŒè¿‘å‚
ğ•„{"å’²ã„ãŸ"; "èŠ±ãŒ"}           // æ—¥æœ¬èªã¯è¿°èªä¸­å¿ƒè¨€èª
```

### ä¸­å›½èªã®å£°èª¿ = ãƒ¢ãƒ¼ãƒ‰å¤šå…ƒæ€§ï¼ˆM1å…¬ç†ï¼‰
```rei
ğ•„{"ma"; "å¦ˆ(1å£°)", "éº»(2å£°)", "é©¬(3å£°)", "éª‚(4å£°)"}
// åŒã˜éŸ³ã«ãƒ¢ãƒ¼ãƒ‰ã‚’å¤‰ãˆã‚‹ã¨æ„å‘³ãŒå¤‰ã‚ã‚‹ = M1å…¬ç†ãã®ã‚‚ã®
```

## æ–°å‹: StringMDim

æ•°å€¤MDimã«å½±éŸ¿ã‚’ä¸ãˆãšã€æ–‡å­—åˆ—ã®ä¸­å¿ƒ-å‘¨è¾ºæ§‹é€ ã‚’æ‰±ã†æ–°ã—ã„å‹ã€‚

```rei
// ç›´æ¥æ§‹ç¯‰ï¼ˆæ–‡å­—åˆ—ã‚’å«ã‚€ğ•„ã¯è‡ªå‹•çš„ã«StringMDimã«ãªã‚‹ï¼‰
ğ•„{"ä¼‘"; "äºº", "æœ¨"}

// ãƒ‘ã‚¤ãƒ—ã§ç”Ÿæˆ
"ä¼‘" |> kanji
"çŒ«ãŒé­šã‚’é£Ÿã¹ãŸ" |> sentence
"ma" |> tone("å¦ˆ", "éº»", "é©¬", "éª‚")
```

## ãƒ‘ã‚¤ãƒ—ã‚³ãƒãƒ³ãƒ‰

### æ–‡å­—åˆ— â†’ StringMDim ç”Ÿæˆ

| ã‚³ãƒãƒ³ãƒ‰ | æ—¥æœ¬èªå | èª¬æ˜ |
|---------|---------|------|
| `kanji` | `æ¼¢å­—` | æ¼¢å­—ã‚’æ§‹æˆè¦ç´ ã«åˆ†è§£ |
| `sentence` | `æ–‡` | æ—¥æœ¬èªæ–‡ã‚’è¿°èªä¸­å¿ƒğ•„ã«å°„å½± |
| `tone` | `å£°èª¿` | ä¸­å›½èªå£°èª¿ã®ğ•„ã‚’ç”Ÿæˆ |

### StringMDim â†’ æƒ…å ±å–å¾—

| ã‚³ãƒãƒ³ãƒ‰ | æ—¥æœ¬èªå | è¿”ã‚Šå€¤ |
|---------|---------|--------|
| `readings` | `èª­ã¿` | {on: ["ã‚­ãƒ¥ã‚¦"], kun: ["ã‚„ã™"]} |
| `strokes` | `ç”»æ•°` | 6 |
| `category` | `å…­æ›¸` | "ä¼šæ„" |
| `radicals` | `éƒ¨é¦–` | {radical: "äºº", name: "ã«ã‚“ã¹ã‚“"} |
| `meaning` | `æ„å‘³` | "rest" |
| `phonetic_group` | `éŸ³ç¬¦` | ["æ™´","æ¸…","è«‹","æƒ…","ç²¾"] |
| `similarity` | `é¡ä¼¼` | KanjiSimilarityæ§‹é€ ä½“ |
| `compose` | `åˆæˆ` | ["ä¼‘"] (æ§‹æˆè¦ç´ ã‹ã‚‰ã®é€†å¼•ã) |
| `decompose` | `åˆ†è§£` | [StringMDim, ...] (å†å¸°åˆ†è§£) |

### ãƒ¡ãƒ³ãƒãƒ¼ã‚¢ã‚¯ã‚»ã‚¹

```rei
let k = "ä¼‘" |> kanji;
k.center      // "ä¼‘"
k.neighbors   // ["äºº", "æœ¨"]
k.radical     // "äºº"
k.strokes     // 6
k.category    // "ä¼šæ„"
k.meaning     // "rest"
k.known       // true
```

## æ¼¢å­—è¾æ›¸

100å­—ä»¥ä¸Šã®æ¼¢å­—ã‚’å…­æ›¸åˆ†é¡ä»˜ãã§åéŒ²:

- **è±¡å½¢**ï¼ˆ34å­—ï¼‰: æ—¥æœˆå±±å·æ°´ç«æœ¨é‡‘åœŸäººå£ç›®æ‰‹è€³è¶³å¥³å­ç”°...
- **æŒ‡äº‹**ï¼ˆ9å­—ï¼‰: ä¸€äºŒä¸‰ä¸Šä¸‹æœ¬æœ«ä¸­å¤©
- **ä¼šæ„**ï¼ˆ35å­—ï¼‰: ä¼‘æ˜æ£®æ—ç”·å¥½ä¿¡ç‚å²©èŠ±é³´æ€å¿æ­¦å‹å…‰ç©ºæµ·é“å’Œç¾æ„›å¤¢...
- **å½¢å£°**ï¼ˆ22å­—ï¼‰: æ™´æ¸…è«‹æƒ…ç²¾éŠ…æ²³æ¹–æ± æ´‹æ¾æ¡œæ©‹æ‘ç´™ç·šçŒ«æ™‚é–“è...

### éŸ³ç¬¦ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆå½¢å£°ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
```
é’ç³»: æ™´ æ¸… è«‹ æƒ… ç²¾ï¼ˆã™ã¹ã¦ã€Œã‚»ã‚¤ã€ã®èª­ã¿ã‚’å…±æœ‰ï¼‰
é–€ç³»: é–“ è é–‰ é–‹ å•
æ°´ç³»: æ²³ æ¹– æ±  æ´‹ æµ· æ¸…
æœ¨ç³»: æ— æ£® æ¾ æ¡œ æ©‹ æ‘ æœ¬ æœ«
```

## ä½¿ç”¨ä¾‹

```rei
// æ¼¢å­—ã®åˆ†è§£ã¨é¡ä¼¼åº¦
"ä¼‘" |> kanji |> similarity("å¥½")
// â†’ {strength: 0.12, sharedComponents: [], sameCategory: true, ...}

"æ™´" |> kanji |> similarity("æ¸…")
// â†’ {strength: 0.65, sharedComponents: ["é’"], sharedPhoneticGroup: true, ...}

// æ§‹æˆè¦ç´ ã‹ã‚‰ã®é€†å¼•ã
ğ•„{"?"; "å¥³", "å­"} |> compose
// â†’ ["å¥½"]

// æ—¥æœ¬èªæ–‡ã®æ§‹é€ åˆ†æ
"çŒ«ãŒé­šã‚’é£Ÿã¹ãŸ" |> sentence
// â†’ StringMDim{center: "é£Ÿã¹ãŸ", neighbors: ["çŒ«ãŒ", "é­šã‚’"]}

// Ïƒã§æ§‹é€ æƒ…å ±ã‚’å–å¾—
"æ˜" |> kanji |> sigma
// â†’ SigmaResult{field: {center:"æ˜", neighbors:["æ—¥","æœˆ"], type:"string"}, ...}
```

## å®Ÿè£…å¤‰æ›´ç®‡æ‰€

### evaluator.ts
- **æ–°å‹**: StringMDim, KanjiInfo, KanjiSimilarity
- **æ¼¢å­—è¾æ›¸**: KANJI_DBï¼ˆ100å­—+ï¼‰, PHONETIC_GROUPSï¼ˆ11ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰
- **æ–°é–¢æ•°**: kanjiToStringMDim, wordToStringMDim, sentenceToStringMDim, toneToStringMDim, kanjiSimilarity, reverseKanjiLookup, getPhoneticGroup
- **evalMDimLitå¤‰æ›´**: æ–‡å­—åˆ—center/neighborsæ¤œå‡º â†’ StringMDimè‡ªå‹•ç”Ÿæˆ
- **æ–°ãƒ‘ã‚¤ãƒ—**: kanji/æ¼¢å­—, sentence/æ–‡, tone/å£°èª¿, similarity/é¡ä¼¼, readings/èª­ã¿, strokes/ç”»æ•°, category/å…­æ›¸, radicals/éƒ¨é¦–, meaning/æ„å‘³, phonetic_group/éŸ³ç¬¦, compose/åˆæˆ, decompose/åˆ†è§£
- **æ–°ãƒ¡ãƒ³ãƒãƒ¼ã‚¢ã‚¯ã‚»ã‚¹**: StringMDim (10ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰), KanjiSimilarity (8ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰)
- **sigmaæ‹¡å¼µ**: StringMDimå¯¾å¿œ

### lexer.ts, parser.ts
- **å¤‰æ›´ãªã—**

## ãƒ†ã‚¹ãƒˆçµæœ

48ãƒ†ã‚¹ãƒˆå…¨é€šé:
- Group 1: æ–‡å­—åˆ—ğ•„ãƒªãƒ†ãƒ©ãƒ« (5)
- Group 2: kanjiãƒ‘ã‚¤ãƒ— (7)
- Group 3: æ¼¢å­—ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ (11)
- Group 4: æ¼¢å­—é¡ä¼¼åº¦ (5)
- Group 5: sentenceãƒ‘ã‚¤ãƒ— (4)
- Group 6: éŸ³ç¬¦ã‚°ãƒ«ãƒ¼ãƒ— (2)
- Group 7: é€†å¼•ããƒ»åˆæˆ (4)
- Group 8: å†å¸°çš„åˆ†è§£ (1)
- Group 9: toneãƒ‘ã‚¤ãƒ— (1)
- Group 10: å…­æ›¸åˆ†é¡ (4)
- Group 11: StringMDimã®Ïƒ (1)
- Group 12: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ (3)

## ç´¯è¨ˆãƒ†ã‚¹ãƒˆæ•°

v0.2.1: 91 + Category C: 135 + evolve: 31 + kanji: 48 = **305ãƒ†ã‚¹ãƒˆ**
