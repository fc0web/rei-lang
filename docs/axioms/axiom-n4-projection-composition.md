# 公理N4：射影合成公理（Projection Composition Axiom）

## D-FUMT 非数数学理論 — 第4公理

*Creator: Nobuki Fujimoto*
*Framework: D-FUMT (Dimensional Fujimoto Universal Mathematical Theory)*
*Language: 0₀式 (Rei-shiki) / Rei*

---

## 公理の定義

**公理N4（射影合成公理）：**

異なる種類の対象 O₁, O₂, ... の射影は合成可能である。
すなわち、異種の 𝕄 を一つの上位 𝕄 の中で結合できる。

```
∀O₁ ∈ D₁, O₂ ∈ D₂, ..., Oₙ ∈ Dₙ :
  ∃compose : 𝕄(π(O₁)) × 𝕄(π(O₂)) × ... × 𝕄(π(Oₙ)) → 𝕄_composed
  
  where 𝕄_composed = 𝕄{ unifier; π(O₁), π(O₂), ..., π(Oₙ) }
```

### 形式的定義

```
定義 N4.1（射影合成 compose）：
  compose : 𝕄-Space × 𝕄-Space → 𝕄-Space
  
  compose(𝕄₁, 𝕄₂) = 𝕄{ u(𝕄₁, 𝕄₂); 𝕄₁, 𝕄₂ }
  
  ここで u(𝕄₁, 𝕄₂) は「統一子」— 二つの射影を結びつける中心。
  統一子は以下のいずれか：
  (a) 共有文脈：二つの射影が共有する場や時間
  (b) 関係記述：二つの射影間の関係性
  (c) 抽象的結合子：明示的に指定される結合の意味

定義 N4.2（合成の結合律）：
  compose(compose(𝕄₁, 𝕄₂), 𝕄₃) ≅ compose(𝕄₁, compose(𝕄₂, 𝕄₃))
  
  すなわち、合成の順序は（構造的に同型な範囲で）交換可能。
  これは U3（階層再帰公理）による平坦化操作で保証される。

定義 N4.3（型安全な合成）：
  合成される射影は型情報を保持する：
  
  compose : 𝕄<C₁, P₁> × 𝕄<C₂, P₂> → 𝕄<Unified, (𝕄<C₁,P₁>, 𝕄<C₂,P₂>)>
  
  合成後も各構成要素の型が保存され、
  型安全なアクセスが可能。

定義 N4.4（合成の分解 decompose）：
  合成の逆操作 decompose が存在する：
  
  decompose(compose(𝕄₁, 𝕄₂)) = (𝕄₁, 𝕄₂)
  
  合成は常に可逆であり、情報損失はない。
  （N5 の不完全性は個々の射影 π に関するものであり、
   合成操作 compose 自体は完全可逆）
```

---

## 仏教哲学との対応

**縁起（pratītyasamutpāda）**

「全てのものは互いに依存して生起する」— 仏教の根本教理。

N4は異種の対象が一つの構造の中で共存し相互依存することを公理化する。
三角形と音と色は、それぞれ独立には存在せず、
一つの「場面」の中で互いに意味を与え合う。

```
映画のワンシーン（縁起的全体）
  ├→ 映像（色の射影）     ← 音楽と結びついて意味が変わる
  ├→ 音楽（音の射影）     ← 映像と結びついて意味が変わる
  └→ 字幕（テキストの射影）← 映像・音楽と結びついて意味が変わる

各要素は単独では「そのシーン」を構成しない。
合成されて初めて「場面の意味」が生じる。
```

**法界縁起（dharmadhātu-pratītyasamutpāda）：**

華厳思想の「一切は一切と関係する」をN4は形式化する。
合成された 𝕄 の中で、各構成要素は他の全ての構成要素と
間接的に関係を持つ。これはC5（共鳴公理）の構造的基盤でもある。

---

## 構文への影響

### 基本合成 `compose`

```rei
// 異種対象の合成
triangle = Shape.new(vertices: [(0,0), (1,0), (0.5, 0.87)])
chord = Sound.new(frequencies: [261.6, 329.6, 392.0])
label = Text.new("Harmony in C")

// マルチメディアシーンの合成
scene = compose(
  triangle |> project(:vertex_center),
  chord |> project(:harmonic),
  label |> project(:semantic)
)
// → 𝕄{ :scene;
//       𝕄{ (0.5, 0.29); (0,0), (1,0), (0.5, 0.87) },   // 図形
//       𝕄{ :C_major; :root, :third, :fifth },              // 和音
//       𝕄{ :harmony; :in, :C }                             // テキスト
//    }
```

### パイプによる合成 `|> with`

```rei
// パイプスタイルの合成
triangle |> project(:vertex_center)
         |> with(chord |> project(:harmonic))
         |> with(label |> project(:semantic))
// 結果は compose と同一
```

### 合成の分解 `decompose`

```rei
// 合成を分解して個別操作
scene |> decompose
// → [
//     𝕄{ (0.5, 0.29); ... },   // 図形射影
//     𝕄{ :C_major; ... },       // 和音射影
//     𝕄{ :harmony; ... }        // テキスト射影
//   ]

// 特定の構成要素だけ取り出す
scene |> decompose |> at(0)     // 図形だけ
scene |> decompose |> at(1)     // 和音だけ
```

### 合成内での横断操作 `across`

```rei
// 合成された 𝕄 の全構成要素に同じ操作を適用
scene |> across(|component| component |> center)
// → [:scene_center, (0.5, 0.29), :C_major, :harmony]
// 各構成要素の「中心」を収集

// 構成要素間の共鳴を検出
scene |> across(:resonance_check)
// → [
//     (:shape, :sound, 0.73),     // 三角形とCメジャーに0.73の共鳴
//     (:sound, :text, 0.91),      // 音と「Harmony」テキストに0.91の共鳴
//     (:shape, :text, 0.45)       // 三角形とテキストに0.45の共鳴
//   ]
```

### 条件付き合成 `compose_when`

```rei
// 共鳴度が閾値以上のときのみ合成
compose_when(
  triangle |> project(:vertex_center),
  chord |> project(:harmonic),
  threshold: 0.5
)
// 共鳴度 0.73 ≥ 0.5 → 合成される
// → 𝕄{ :resonant_pair; shape_𝕄, sound_𝕄 }

// 共鳴がない場合
compose_when(
  random_noise |> project(:spectral),
  triangle |> project(:vertex_center),
  threshold: 0.5
)
// 共鳴度 0.12 < 0.5 → 合成されない（各射影が独立に返される）
```

---

## σ（6属性）との関係

```
合成された 𝕄 の σ は、構成要素の σ から合成される：

compose(𝕄₁, 𝕄₂).σ.field    = merge_field(𝕄₁.σ.field, 𝕄₂.σ.field)
                                共有する場があれば統合、なければ並置
                                
compose(𝕄₁, 𝕄₂).σ.flow     = sync_flow(𝕄₁.σ.flow, 𝕄₂.σ.flow)
                                流れの同期（映像と音楽の同期のように）
                                
compose(𝕄₁, 𝕄₂).σ.memory   = interleave(𝕄₁.σ.memory, 𝕄₂.σ.memory)
                                記憶の時系列的統合
                                
compose(𝕄₁, 𝕄₂).σ.layer    = max(𝕄₁.σ.layer, 𝕄₂.σ.layer) + 1
                                合成は一つ上の層を生成する
                                
compose(𝕄₁, 𝕄₂).σ.relation = 𝕄₁.σ.relation ∪ 𝕄₂.σ.relation ∪ {(𝕄₁, 𝕄₂)}
                                既存の関係 + 新しい合成関係
                                
compose(𝕄₁, 𝕄₂).σ.will     = emergent_will(𝕄₁.σ.will, 𝕄₂.σ.will)
                                合成から「創発的意志」が生じ得る
                                部分の意志の和ではない新しい方向性

特に σ.will の創発性は重要：
三角形の「安定しようとする意志」と音楽の「解決しようとする意志」が合成されると、
「調和しようとする意志」が創発する。これは C2（傾向性）の合成版である。
```

---

## 数学的定理

```
定理 N4.1（合成の可逆性定理）：
  compose 操作は常に完全可逆である。
  
  decompose(compose(𝕄₁, 𝕄₂)) = (𝕄₁, 𝕄₂)
  
  すなわち、合成で情報は失われない。
  （N5 の不完全性は射影 π に関するものであり、compose には適用されない）

定理 N4.2（合成の結合律）：
  compose(compose(𝕄₁, 𝕄₂), 𝕄₃) ≅ compose(𝕄₁, compose(𝕄₂, 𝕄₃))
  
  ≅ は構造的同型（isomorphic）を意味する。
  内部の入れ子構造は異なるが、情報量と到達可能性は同じ。
  U3（階層再帰）の flatten 操作により正準形に変換可能。

定理 N4.3（合成と射影の交換定理）：
  compose(π(O₁), π(O₂)) ≅ π_composed(O₁ ⊗ O₂)
  
  すなわち、「射影してから合成」と「合成してから射影」は同型の結果を生む。
  ⊗ は対象レベルの合成操作。

定理 N4.4（共鳴の創発定理）：
  compose(𝕄₁, 𝕄₂) において、
  𝕄₁ と 𝕄₂ の間の共鳴度 R は一般に 0 より大きい。
  
  R(compose(𝕄₁, 𝕄₂)) > 0 ⟺ ∃ structural_similarity(𝕄₁, 𝕄₂)
  
  すなわち、合成は常に何らかの構造的共通性を顕在化する。
  これは C5（共鳴公理）の N4 における表現であり、
  「異種のものを並べると共通点が見える」という直感の形式化。

定理 N4.5（U3階層との整合性定理）：
  compose による合成は、U3 の 𝕄 再帰の特殊ケースである。
  
  compose(𝕄₁, 𝕄₂) = 𝕄{ u; 𝕄₁, 𝕄₂ }
  
  これは U3 における「中心が統一子 u、周囲が構成要素」の再帰構造。
  N4 は U3 の「異種合成」への拡張として位置づけられる。
```

---

## C1〜C5・U1〜U5との接続

```
C1（自己参照）→ N4：合成された 𝕄 は、自身の構成要素を σ で参照できる。
                    「自分が何から成っているか」を知る。

C2（傾向性）  → N4：合成から創発的傾向性が生じる（σ.will の合成規則）。

C5（共鳴）    → N4：合成内の構成要素間で共鳴が発生する。
                    異種対象間の共鳴の構造的基盤。

U1（構造還元）→ N4：合成結果も 𝕄 であるから、U1 を満たす。

U2（変換保存）→ N4：合成された 𝕄 に対してもパイプ操作が適用可能。
                    across で横断操作、decompose で分解。

U3（階層再帰）→ N4：合成は階層の一段上昇。
                    compose(compose(A, B), compose(C, D)) は2段の階層。

U4（領域架橋）→ N4：N4 は U4 の実現メカニズム。
                    異なる領域 D₁, D₂ の射影を合成することが「架橋」。
```

---

## 実装への影響

| 変更点 | 種類 | 内容 |
|--------|------|------|
| `compose` 関数 | 新規追加 | 異種 𝕄 の合成 |
| `with` パイプコマンド | 新規追加 | パイプスタイルの合成 |
| `decompose` パイプコマンド | 新規追加 | 合成の分解 |
| `across` パイプコマンド | 新規追加 | 合成内横断操作 |
| `compose_when` | 新規追加 | 条件付き合成 |
| `Composed<T₁, T₂>` 型 | 新規追加 | 合成の型安全な表現 |
| σ 合成規則 | 新規追加 | 6属性の合成時の振る舞い定義 |
| 新演算子 | **なし** | ゼロ |
| 破壊的変更 | **なし** | 既存の 𝕄 入れ子は合成の特殊ケースとして互換 |

---

## 4つの決定的な例への影響

| 場面 | N4なし | N4あり |
|------|--------|--------|
| **マルチメディア** | 映像・音声・字幕を別々のパイプラインで処理 | `compose(video, audio, subtitle)` で統一 𝕄 として処理。across で同期操作 |
| **科学シミュレーション** | 熱・力学・化学を別モデルで計算→手動統合 | 三つの射影を合成し、相互作用が自然に記述される |
| **ゲーム** | グラフィック・物理・AI を別システム | compose で統一。ゲームの「シーン」が一つの 𝕄 |
| **医療診断** | 画像・血液検査・問診を個別分析 | compose で統合。across で横断的パターン検出 |

---

*N5（非数の不完全性公理）への布石：*

N1〜N4で、非数対象を 𝕄 に射影し、多重視点で見て、変換し、合成する
— 強力なフレームワークが構築された。

しかし、ここで正直な問いが残る：
「これで対象の全てを捉えたのか？」

N5は「否」と答える。いかなる射影も、いかなる合成も、
対象の全情報を完全には捉えきれない。
これは限界の宣言であると同時に、
無限に精緻化を続けられるという希望の宣言でもある。
