# ADR-001: Reiアーキテクチャ憲法の制定

## 状態
Accepted

## 文脈
Reiプロジェクトが成長するにつれ、以下の問題が顕在化した：

1. evaluator.ts が4,354行のモノリスになり、LLMのコンテキストウィンドウに収まらない
2. Core（変更不可）とPlugin（拡張自由）の境界が曖昧で、変更の影響範囲が予測不能
3. プロジェクトが10万行規模に成長した場合、現在の構造では協力作業が破綻する
4. ChatGPT/Claude/Geminiなど複数LLMとの協力にモデル非依存の規約が必要

## 決定
以下の4文書を「Rei憲法」として制定する：

1. **ARCH.md** — アーキテクチャ憲法（依存方向ルール、Core/Plugin境界、Index Tree、Spec世代管理）
2. **CONTRACT.md** — Plugin契約（Plugin構造要件、命名規則、テスト契約、世代管理プロセス）
3. **REI_INDEX.md** — プロジェクト索引（LLMが最初に読む目次）
4. **tools/mcp-server/** — 機械的索引（MCPサーバーによる動的コード検索）

設計は「Core不変＋Plugin増殖＋Index Tree＋Spec世代管理」の4本柱に基づく。

## 影響
- 影響を受けるファイル: 全ファイル（規約の適用対象）
- 既存コードの変更: なし（規約は既存コードを壊さない）
- 移行パス: 既存の evaluator.ts は段階的にCore + Plugin に分離（Phase 3以降）

## 日付
2026-02-13
